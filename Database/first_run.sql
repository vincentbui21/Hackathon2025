
-- Create the database
CREATE DATABASE IF NOT EXISTS valioaimo;
USE valioaimo;

-- ========================================
-- Table: Producer
-- ========================================
CREATE TABLE IF NOT EXISTS Producer (
    ProducerID BIGINT UNSIGNED PRIMARY KEY,
    Producer_name VARCHAR(255) NOT NULL,
    Credit_score DECIMAL(5,2) DEFAULT 0.0
);

-- ========================================
-- Table: Product
-- ========================================
CREATE TABLE IF NOT EXISTS Product (
    ProductID BIGINT UNSIGNED  PRIMARY KEY,
    ProducerID BIGINT UNSIGNED NOT NULL,
    Product_name VARCHAR(255) NOT NULL,
    Price DECIMAL(10,2) NOT NULL,
    Quantity INT DEFAULT 500,
    Allergens JSON,
    Non_allergens JSON,
    Prediction_score DECIMAL(5,2) DEFAULT 0.0,
    FOREIGN KEY (ProducerID) REFERENCES Producer(ProducerID) ON DELETE CASCADE
);

-- ========================================
-- Table: Order
-- ========================================
CREATE TABLE IF NOT EXISTS `Order` (
    OrderID INT AUTO_INCREMENT PRIMARY KEY,
    Total DECIMAL(10,2) DEFAULT 0.0,
    Status VARCHAR(50) DEFAULT 'Pending',
    Tracking JSON,
    Substitution JSON
);

-- Optional: index on Tracking/Substitution if you query often




-- First, insert unique producers (to avoid duplicates)
INSERT INTO Producer (ProducerID, Producer_name, Credit_score) VALUES
('6410349999998', 'Fazer Leipomot Oy', 782),
('6429903977709', 'Aduki Oy', 695),
('6429921852576', 'Lantmännen Cerealia Oy', 815),
('6432009999995', 'Oy Conaxess Trade Finland Ab', 742),
('6416710999994', 'Gavrielides E. Oy', 668),
('6405234999993', 'Vehmaan Maut Oy', 701),
('6406609999990', 'PNM Chipsters Oy', 788),
('6408629999998', 'Riitan Herkku Oy', 654),
('6416577999991', 'Lantmännen Unibake Oy Ab Finland', 809),
('6430026139998', 'Mondo Fresco Oy', 623),
('6436509999998', 'Mauste-Sallinen Oy', 731),
('6415009999998', 'Helsingin Mylly Oy', 796),
('6411209999998', 'RavintoRaisio Oy', 803),
('6430037249990', 'Hedvi Markkinointi Oy', 671),
('6405620999996', 'Snellmanin Kokkikartano Oy', 759),
('4740086999992', 'Eesti Pagar AS', 687),
('6420244999993', 'Mars Finland Oy', 821),
('6411409999996', 'Fazer Makeiset Oy', 798),
('6430309999998', 'Valkoinen Risti Oy - Vita Korset Ab', 712),
('6412009999997', 'Saarioinen Oy', 834),
('6408439999997', 'Valio Oy', 847),
('6430031899993', 'Feelia Oy', 678),
('6430022939998', 'Hot Wings Oy / Ravintola Siipiweikot', 645),
('6410389999996', 'Orkla Suomi Finland Oy Ab', 792),
('6405263999995', 'Lagerblad Foods Oy', 726),
('6409709999990', 'Eckes-Granini Finland Oy Ab', 704),
('6418229999991', 'Europicnic Oy', 639),
('6416661999999', 'Rollfoods Oy Ab', 767),
('6429920899459', 'Sweet & Life Oy', 611)
ON DUPLICATE KEY UPDATE Producer_name=VALUES(Producer_name), Credit_score=VALUES(Credit_score);

-- Now insert products
INSERT INTO Product (ProductID, ProducerID, Product_name, Price, Quantity, Allergens, Non_allergens, Prediction_score) VALUES
(6413467551604, 6410349999998, '6 x Fazer Gluten-Free Omar doughnut 2pcs 230g, fully baked frozen', 45.99, 125, '"AE-CONTAINS,AM-CONTAINS,AN-MAY_CONTAIN,AS-MAY_CONTAIN,BM-MAY_CONTAIN,SA-MAY_CONTAIN,SH-MAY_CONTAIN,UW-CONTAINS"', '"AC-FREE_FROM,AF-FREE_FROM,AP-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,ML-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.87),
(6430013860133, 6429903977709, 'Aduki organic amaranth 500g', 12.50, 340, '"AN-MAY_CONTAIN,AP-MAY_CONTAIN,AS-MAY_CONTAIN,AY-MAY_CONTAIN"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.92),
(6417700053122, 6429921852576, 'Myllyn Paras Emännän Semi Coarse Wheat Flour 2kg', 8.99, 450, '"AW-CONTAINS,UW-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.95),
(4006733004458, 6432009999995, 'Dr. Oetker Bolognese Fix dry mix 2.75kg', 32.75, 88, '"AE-MAY_CONTAIN,AM-MAY_CONTAIN,AW-MAY_CONTAIN"', '""', 0.78),
(6413467418303, 6410349999998, 'Fazer Taikayö chocolate cake roll 485g', 18.90, 215, '"AE-CONTAINS,AM-CONTAINS,AN-MAY_CONTAIN,AW-CONTAINS,AY-CONTAINS,GB-CONTAINS,ML-CONTAINS,NC-CONTAINS,NL-MAY_CONTAIN,UW-CONTAINS"', '"AC-FREE_FROM,AF-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,UM-FREE_FROM"', 0.84),
(16416710300841, 6416710999994, '8 x Filos feta lactose free PDO 150g', 28.40, 167, '"AM-CONTAINS"', '""', 0.91),
(6413467356209, 6410349999998, 'Fazer Ready baked Rye Rice Pasty 56 x 70g, fully baked frozen', 89.99, 54, '"AM-CONTAINS,AW-CONTAINS,NR-CONTAINS,UW-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,ML-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.89),
(6405234048585, 6405234999993, 'Vehmaan Maut, Lingonberry-crea 0,5 kg', 14.25, 198, '"AM-CONTAINS"', '""', 0.86),
(6406600664477, 6406609999990, 'Familia Pro Blue Cheese Dip 2,5 kg', 42.50, 142, '"AM-CONTAINS"', '""', 0.81),
(6430014210791, 6408629999998, '3x Riitan Herkku blueberry platepie 1250g', 35.60, 109, '"AE-CONTAINS,AM-MAY_CONTAIN,AN-MAY_CONTAIN,AW-CONTAINS,SA-MAY_CONTAIN,UW-CONTAINS"', '""', 0.83),
(6416577025850, 6416577999991, 'Schulstad Bakery Solutions Croissant ready baked 40x65g, frozen', 52.30, 93, '"AE-CONTAINS,AM-CONTAINS,AN-MAY_CONTAIN,AS-MAY_CONTAIN,AW-CONTAINS,SA-MAY_CONTAIN,SH-MAY_CONTAIN,UW-CONTAINS"', '""', 0.88),
(6416577028592, 6416577999991, 'Myllyn Paras Gluten-free Star shaped crown 20x60g', 38.75, 176, '"AE-CONTAINS,AM-CONTAINS,AN-MAY_CONTAIN,AY-MAY_CONTAIN,BC-MAY_CONTAIN,BM-MAY_CONTAIN,SA-MAY_CONTAIN,SH-MAY_CONTAIN,UW-CONTAINS"', '"AW-FREE_FROM"', 0.79),
(4806525094847, 6430026139998, 'La Rose Noire Large round Vegan tart shell, frozen 45x22g', 41.20, 131, '"AE-MAY_CONTAIN,AM-MAY_CONTAIN,AN-MAY_CONTAIN,AS-MAY_CONTAIN,AW-CONTAINS,AY-CONTAINS,BM-MAY_CONTAIN,SA-MAY_CONTAIN,UW-CONTAINS"', '""', 0.76),
(6436501006434, 6436509999998, 'Salliselta  Soya chrushed light 250g', 11.80, 287, '"AN-MAY_CONTAIN,AP-MAY_CONTAIN,AS-MAY_CONTAIN,AY-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.93),
(6436501016730, 6436509999998, 'Salliselta Pecan nuts 800g', 68.50, 74, '"AN-CONTAINS,AP-MAY_CONTAIN,AS-MAY_CONTAIN,AY-MAY_CONTAIN,SP-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.90),
(6436501018451, 6436509999998, 'Salliselta Pecan nuts 70gx12', 37.90, 162, '"AN-CONTAINS,AP-MAY_CONTAIN,AS-MAY_CONTAIN,AY-MAY_CONTAIN,SP-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.91),
(6415002500177, 6415009999998, 'Myllärin Coarse wheat flour 20 kg', 24.90, 235, '"AW-CONTAINS,UW-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.96),
(6415002506827, 6415009999998, 'Myllärin Special Wheat flour 20 kg', 26.50, 204, '"AW-CONTAINS,UW-CONTAINS"', '""', 0.94),
(6416597116743, 6411209999998, 'Sunnuntai 4kg semi-coarse wheat flour', 15.75, 318, '"AW-CONTAINS,UW-CONTAINS"', '""', 0.95),
(4006034120536, 6430037249990, 'Wernsing our best Potato salad 5kg', 48.60, 97, '"AE-CONTAINS,AM-CONTAINS,AW-CONTAINS,BM-CONTAINS"', '"AC-FREE_FROM,AF-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.82),
(6405096000370, 6405620999996, 'Mr. Panini Meat Lovers panini 235g', 19.50, 183, '"AE-CONTAINS,AM-CONTAINS,AW-CONTAINS,UW-CONTAINS"', '"AC-FREE_FROM,AF-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.85),
(6405096008031, 6405620999996, 'Mr. Panini Kebab-Garlic panini 235g', 19.50, 191, '"AE-CONTAINS,AM-CONTAINS,AW-CONTAINS,UW-CONTAINS"', '"AC-FREE_FROM,AF-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.86),
(4740086019928, 4740086999992, 'Eesti Pagar Orange-chocolate cake 3 x 950g (10x95g)', 44.90, 119, '"AE-CONTAINS,AM-CONTAINS,AN-MAY_CONTAIN,AW-CONTAINS,AY-CONTAINS,ML-CONTAINS,UW-CONTAINS"', '"SH-FREE_FROM"', 0.80),
(5900951311239, 6420244999993, '24x Mars 2pack Chocolate bar 70g', 56.80, 156, '"AE-CONTAINS,AM-CONTAINS,AN-MAY_CONTAIN,AP-MAY_CONTAIN,AW-CONTAINS,AY-CONTAINS,GB-CONTAINS,ML-CONTAINS"', '""', 0.77),
(6411401062100, 6411409999996, 'Fazer Suklaalehti chocolate biscuit 185g', 16.90, 267, '"AE-MAY_CONTAIN,AM-CONTAINS,AW-CONTAINS,AY-CONTAINS,GB-MAY_CONTAIN,GO-MAY_CONTAIN,ML-CONTAINS,NR-MAY_CONTAIN,UW-CONTAINS"', '"AC-FREE_FROM,AF-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,GK-FREE_FROM,GS-FREE_FROM,NL-FREE_FROM,SA-FREE_FROM,SC-FREE_FROM,SH-FREE_FROM,SM-FREE_FROM,SP-FREE_FROM,SR-FREE_FROM,ST-FREE_FROM,SW-FREE_FROM,UM-FREE_FROM"', 0.88),
(5201704054787, 6430309999998, 'Kolios Lactose free Feta 200g', 13.20, 223, '"AM-CONTAINS"', '""', 0.89),
(6412004034846, 6412009999997, '4 x Saarioinen Lactose free rice porridge 270g', 21.40, 195, '"AM-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,GB-FREE_FROM,GK-FREE_FROM,GO-FREE_FROM,GS-FREE_FROM,ML-FREE_FROM,NL-FREE_FROM,NR-FREE_FROM,SC-FREE_FROM,UM-FREE_FROM,UW-FREE_FROM"', 0.92),
(5201704054770, 6430309999998, 'Kolios Fetapiece 900g lactose free', 39.90, 138, '"AM-CONTAINS"', '""', 0.90),
(6408430859504, 6408439999997, 'Valio baked rye-rice pastry 65 g x 60 / 3,9 kg lactose free', 67.50, 86, '"AM-CONTAINS,AW-CONTAINS,NR-CONTAINS,UW-CONTAINS"', '""', 0.87),
(6408430863266, 6408439999997, 'Valio baked small rice pastry with rye 30 g x 100 / 3 kg lactose free', 58.90, 103, '"AM-CONTAINS,AW-CONTAINS,NR-CONTAINS,UW-CONTAINS"', '""', 0.88),
(6438516016248, 6430031899993, 'Feelia S Chicken soup 3kg', 34.50, 144, '"AM-CONTAINS"', '""', 0.83),
(3395321017347, 6406609999990, 'Valrhona White chocolate ball 35% 504 pcs', 124.99, 42, '"AE-MAY_CONTAIN,AM-CONTAINS,AN-MAY_CONTAIN,AW-MAY_CONTAIN,AY-MAY_CONTAIN,GB-MAY_CONTAIN,SA-MAY_CONTAIN,SH-MAY_CONTAIN,SP-MAY_CONTAIN,ST-MAY_CONTAIN,SW-MAY_CONTAIN,UW-MAY_CONTAIN"', '""', 0.75),
(6410500046516, 6429921852576, 'VAASAN PIENI PYÖREÄ Monivilja 250g Multigrain Crispbread', 9.80, 389, '"AS-CONTAINS,AW-CONTAINS,GB-CONTAINS,GO-CONTAINS,NR-CONTAINS,UW-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.94),
(6430022931282, 6430022939998, 'SIIPIWEIKOT BLUE CHEESE DIPMIX 1KG', 29.90, 172, '"AM-CONTAINS"', '""', 0.84),
(7039318013153, 6410389999996, '14 x Anyday Cashew Nuts 140g', 47.60, 211, '"AN-CONTAINS,AP-MAY_CONTAIN,SA-MAY_CONTAIN,SC-CONTAINS,SH-MAY_CONTAIN,SM-MAY_CONTAIN,SP-MAY_CONTAIN,SR-MAY_CONTAIN,ST-MAY_CONTAIN,SW-MAY_CONTAIN"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AS-FFREE_FROM,AU-FREE_FROM,AW-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,BM-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.91),
(6405263040604, 6405263999995, 'Lagerblad Foods Spicy vegebite 8 g / 5,0 kg fried frozen', 53.80, 127, '"BM-CONTAINS"', '"AC-FREE_FROM,AE-FREE_FROM,AF-FREE_FROM,AM-FREE_FROM,AN-FREE_FROM,AP-FREE_FROM,AS-FREE_FROM,AU-FREE_FROM,AW-FREE_FROM,AY-FREE_FROM,BC-FREE_FROM,ML-FREE_FROM,NL-FREE_FROM,UM-FREE_FROM"', 0.87),
(5705001780610, 6409709999990, 'Rynkeby Lingonberry juice drink concentrate 1+8 10L', 72.40, 68, '"X99-CONTAINS"', '""', 0.80),
(4009837852291, 6418229999991, 'Europicnic Pretzel 100g 60x100g frozen product', 62.90, 95, '"AE-MAY_CONTAIN,AM-MAY_CONTAIN,AS-MAY_CONTAIN,AW-CONTAINS,AY-MAY_CONTAIN,GB-CONTAINS,UW-CONTAINS"', '""', 0.85),
(6416661016184, 6416661999999, 'Rollfoods High-fibre ciabatta sliced 80 g (6 pcs x 7 bags) 3.36 kg frozen', 49.50, 114, '"AE-MAY_CONTAIN,AM-MAY_CONTAIN,AW-CONTAINS,GO-CONTAINS,NR-CONTAINS,UW-CONTAINS"', '""', 0.86),
(6430027415084, 6429920899459, 'GelatoLAB-Espoo 5L ice cream Coconut vegan', 85.90, 57, '"AN-MAY_CONTAIN,AP-MAY_CONTAIN,SA-MAY_CONTAIN,SC-MAY_CONTAIN,SH-MAY_CONTAIN,ST-MAY_CONTAIN,SW-MAY_CONTAIN"', '""', 0.78)
ON DUPLICATE KEY UPDATE
    ProducerID=VALUES(ProducerID),
    Product_name=VALUES(Product_name),
    Price=VALUES(Price),
    Quantity=VALUES(Quantity),
    Allergens=VALUES(Allergens),
    Non_allergens=VALUES(Non_allergens),
    Prediction_score=VALUES(Prediction_score);
